<p-dialog header="Add DataPoint" [modal]="true" [(visible)]="visible" [style]="{ width: '30rem' }" (onHide)="closeDialog()">
  <form [formGroup]="profileForm" (ngSubmit)="save()">
    <div class="flex items-center gap-4 mb-4">
      <label for="id" class="font-semibold w-36">ID</label>
      <input pInputText id="id" class="flex-auto" formControlName="id" [ngClass]="{'p-invalid': profileForm.get('id')?.invalid && profileForm.get('id')?.touched}" autocomplete="off" placeholder="e.g. Measurement_1" />
    </div>

    <div class="flex items-center gap-4 mb-4">
      <label for="stationaryAddress" class="font-semibold w-36">Stationary Address</label>
      <input pInputText id="stationaryAddress" class="flex-auto" type="number" formControlName="stationaryAddress" [ngClass]="{'p-invalid': profileForm.get('stationaryAddress')?.invalid && profileForm.get('stationaryAddress')?.touched}" autocomplete="off" placeholder="e.g. 1" />
    </div>

    <div class="flex items-center gap-4 mb-4">
      <label for="objectAddress" class="font-semibold w-36">Object Address</label>
      <input pInputText id="objectAddress" class="flex-auto" type="number" formControlName="objectAddress" [ngClass]="{'p-invalid': profileForm.get('objectAddress')?.invalid && profileForm.get('objectAddress')?.touched}" autocomplete="off" placeholder="e.g. 100" />
    </div>

    <div class="flex items-center gap-4 mb-4">
      <label for="iec104DataType" class="font-semibold w-36 flex items-center gap-2">
        IEC104 Data Type
        <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tf6500_tc3_iec60870_5_10x/984447883.html&id=" target="_blank" class="text-primary-emphasis text-xl ">
          <i class="pi pi-info-circle"></i>
        </a>
      </label>
      <p-select id="iec104DataType" class="flex-auto" [options]="iec104DataTypes" formControlName="iec104DataType" [filter]="true" filterPlaceholder="Search types..." [ngClass]="{'ng-dirty': profileForm.get('iec104DataType')?.invalid}"></p-select>
    </div>

    <div class="flex items-center gap-4 mb-4">
      <label for="mode" class="font-semibold w-36">Mode</label>
      <p-select id="mode" class="flex-auto" [options]="simulationModes" formControlName="mode" optionLabel="label" optionValue="value" [ngClass]="{'ng-dirty': true}" [styleClass]="profileForm.get('mode')?.invalid ? 'ng-dirty' : ''"></p-select>
    </div>

    <div class="flex items-center gap-4 mb-4" *ngIf="isPredefinedProfile">
      <label for="profileName" class="font-semibold w-36">Profile</label>
      <p-select id="profileName" class="flex-auto" [options]="availableProfiles" formControlName="profileName" placeholder="Select a profile"></p-select>
    </div>

    <div class="flex justify-end gap-2 mt-4">
      <p-button label="Cancel" severity="secondary" (click)="closeDialog()" />
      <p-button label="Create" type="submit" icon="pi pi-plus" [disabled]="profileForm.invalid" />
    </div>
  </form>
</p-dialog>
